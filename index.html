<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>Bowen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Bowen">
<meta property="og:url" content="http://bcllemon.github.io/index.html">
<meta property="og:site_name" content="Bowen">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bowen">
  
    <link rel="alternative" href="/atom.xml" title="Bowen" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?d5509bd67b01fc636223f654342c7b43";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Bowen</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://bcllemon.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2020/cors" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-10-13/2020/cors/" class="article-date">
  <time datetime="2020-10-13T15:42:00.000Z" itemprop="datePublished">2020-10-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-10-13/2020/cors/">跨域资源共享 CORS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。<br>它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。</p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>CORS需要浏览器和服务器同时支持。整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样。浏览器一旦发现AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。因此，实现CORS通信的关键是服务器。只要服务器实现了CORS接口，就可以跨源通信。</p>
<h1 id="两种请求"><a href="#两种请求" class="headerlink" title="两种请求"></a>两种请求</h1><h2 id="简单请求"><a href="#简单请求" class="headerlink" title="简单请求"></a>简单请求</h2><p>只要同时满足以下两大条件，就属于简单请求。<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>) 请求方法是以下三种方法之一：</span><br><span class="line"></span><br><span class="line">HEAD</span><br><span class="line">GET</span><br><span class="line">POST</span><br><span class="line">（<span class="number">2</span>）HTTP的头信息不超出以下几种字段：</span><br><span class="line"></span><br><span class="line">Accept</span><br><span class="line">Accept-Language</span><br><span class="line">Content-Language</span><br><span class="line">Last-Event-ID</span><br><span class="line">Content-<span class="keyword">Type</span>：只限于三个值application/x-www-<span class="keyword">form</span>-urlencoded、multipart/<span class="keyword">form</span>-<span class="keyword">data</span>、text/plain</span><br></pre></td></tr></table></figure></p>
<p>表单一直可以发出跨域请求, AJAX 的跨域设计就是，只要表单可以发，AJAX 就可以直接发。</p>
<h2 id="非简单请求"><a href="#非简单请求" class="headerlink" title="非简单请求"></a>非简单请求</h2><p>非简单请求是那种对服务器有特殊要求的请求，比如请求方法是PUT或DELETE，或者Content-Type字段的类型是application/json。<br>非简单请求的CORS请求，会在正式通信之前，增加一次HTTP查询请求，称为”预检”请求（preflight）。<br>浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些HTTP动词和头信息字段。只有得到肯定答复，浏览器才会发出正式的XMLHttpRequest请求，否则就报错。</p>
<h1 id="服务器端处理"><a href="#服务器端处理" class="headerlink" title="服务器端处理"></a>服务器端处理</h1><ol>
<li><p>Access-Control-Allow-Origin<br>该字段是必须的。它的值要么是请求时Origin字段的值，要么是一个”星号”，表示接受任意域名的请求。</p>
</li>
<li><p>Access-Control-Allow-Credentials<br>字段可选。它的值是一个布尔值，表示是否允许发送Cookie。默认情况下，Cookie不包括在CORS请求之中。设为true，即表示服务器明确许可，Cookie可以包含在请求中，一起发给服务器。这个值也只能设为true，如果服务器不要浏览器发送Cookie，删除该字段即可。</p>
</li>
<li><p>Access-Control-Expose-Headers<br>该字段可选。CORS请求时，XMLHttpRequest对象的getResponseHeader()方法只能拿到6个基本字段：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma。如果想拿到其他字段，就必须在Access-Control-Expose-Headers里面指定。上面的例子指定，getResponseHeader(‘FooBar’)可以返回FooBar字段的值。</p>
</li>
<li><p>Access-Control-Allow-Methods<br>该字段必需，它的值是逗号分隔的一个字符串，表明服务器支持的所有跨域请求的方法。注意，返回的是所有支持的方法，而不单是浏览器请求的那个方法。这是为了避免多次”预检”请求。</p>
</li>
<li><p>Access-Control-Allow-Headers<br>如果浏览器请求包括Access-Control-Request-Headers字段，则Access-Control-Allow-Headers字段是必需的。它也是一个逗号分隔的字符串，表明服务器支持的所有头信息字段，不限于浏览器在”预检”中请求的字段。</p>
</li>
<li><p>Access-Control-Max-Age<br>该字段可选，用来指定本次预检请求的有效期，单位为秒。上面结果中，有效期是20天（1728000秒），即允许缓存该条回应1728000秒（即20天），在此期间，不用发出另一条预检请求。</p>
</li>
<li><p>Access-Control-Request-Method<br>该字段是必须的，用来列出浏览器的CORS请求会用到哪些HTTP方法.</p>
</li>
<li><p>Access-Control-Request-Headers<br>该字段是一个逗号分隔的字符串，指定浏览器CORS请求会额外发送的头信息字段</p>
</li>
</ol>
<p>简单请求, 返回: 1/2/3<br>非简单请求, 上送: 7/8, 返回: 1/2/4/5/6</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-10-13/2020/cors/" data-id="ckg7o6w2600011ksl870xdxhb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2020/api_trace" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-09-29/2020/api_trace/" class="article-date">
  <time datetime="2020-09-29T10:45:00.000Z" itemprop="datePublished">2020-09-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-09-29/2020/api_trace/">API 调用追踪</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h1><p>开发排查系统问题用得最多的手段就是查看系统日志，但是在分布式环境下使用日志定位问题还是比较麻烦，需要借助”全链路追踪ID”把上下文串联起来.</p>
<p>目前大多数分布式追踪系统的思想模型都来自 Google’s Dapper 论文<br><img src="/images/2020/api_trace_1.png" alt></p>
<ul>
<li>ID<br>64位的整数</li>
<li>Trace Tree : 一次跟踪</li>
<li>树节点是Span，包括：<ul>
<li>Span ID</li>
<li>开始时间和结束时间</li>
<li>RPC时间数据</li>
<li>应用自定义标识数据annotations</li>
</ul>
</li>
<li>树节点之间的边是Span 和它的父节点之间的关系</li>
<li>没有父节点的Span是根Span (root span)</li>
<li>所有树节点都有共同的一个Trace ID 标识这次跟踪</li>
</ul>
<h1 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h1><h2 id="无入侵增加-traceId"><a href="#无入侵增加-traceId" class="headerlink" title="无入侵增加 traceId"></a>无入侵增加 traceId</h2><p>使用 Logback 的 MDC 机制，在日志模板中加入 traceId 标识，取值方式为 %X{traceId}</p>
<ol>
<li>系统入口 创建 traceId 的值</li>
<li>使用 MDC 保存 traceId</li>
<li>修改 logback 配置文件模板格式添加标识 %X{traceId}<blockquote>
<p>MDC（Mapped Diagnostic Context，映射调试上下文）是 log4j 和 logback 提供的一种方便在多线程条件下记录日志的功能。</p>
</blockquote>
</li>
</ol>
<h2 id="跨进程传递"><a href="#跨进程传递" class="headerlink" title="跨进程传递"></a>跨进程传递</h2><ol>
<li>「dubbo服务」 使用 org.apache.dubbo.rpc.Filter 创建一个过滤器进行 traceId 传递</li>
</ol>
<ul>
<li>服务消费者：负责传递链路追踪 ID</li>
<li>服务提供者：负责接收 ID 并保存到 MDC 中</li>
</ul>
<ol start="2">
<li>基于 Spring 的Rest 服务</li>
</ol>
<ul>
<li>服务消费者: 自定义 Http 客户端,统一负责传递链路追踪 ID</li>
<li>服务提供者: 使用 Filter 进行 traceId 传递</li>
</ul>
<h2 id="Spring-Cloud-全家桶解决方案"><a href="#Spring-Cloud-全家桶解决方案" class="headerlink" title="Spring Cloud 全家桶解决方案"></a>Spring Cloud 全家桶解决方案</h2><p>Spring-Cloud-Sleuth是Spring Cloud的组成部分之一，为SpringCloud应用实现了一种分布式追踪解决方案，其兼容了Zipkin, HTrace和log-based追踪</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-09-29/2020/api_trace/" data-id="ckg7o6w2500001ksl97afrbla" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2020/error_handle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-09-24/2020/error_handle/" class="article-date">
  <time datetime="2020-09-24T17:10:00.000Z" itemprop="datePublished">2020-09-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-09-24/2020/error_handle/">异常处理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="错误返回码"><a href="#错误返回码" class="headerlink" title="错误返回码"></a>错误返回码</h1><p>处理错误最直接的方式是通过错误码，这也是传统的方式，在过程式语言中通常都是用这样的方式处理错误的.基本上来说，其通过函数的返回值标识是否有错，然后通过全局的errno变量并配合一个 errstr 的数组来告诉你为什么出错。</p>
<h1 id="捕获异常"><a href="#捕获异常" class="headerlink" title="捕获异常"></a>捕获异常</h1><p>try - catch - finally 异常处理</p>
<ul>
<li>函数接口在 input(参数)和 output(返回值)以及错误处理的语义是比较清楚的。 </li>
<li>正常逻辑的代码可以与错误处理和资源清理的代码分开，提高了代码的可读性。 </li>
<li>异常不能被忽略(如果要忽略也需要 catch 住，这是显式忽略)。 </li>
<li>在面向对象的语言中(如 Java)，异常是个对象，所以，可以实现多态式的 catch。</li>
</ul>
<h1 id="错误返回码-vs-异常捕捉"><a href="#错误返回码-vs-异常捕捉" class="headerlink" title="错误返回码 vs 异常捕捉"></a>错误返回码 vs 异常捕捉</h1><ul>
<li>对于我们并不期望会发生的事，我们可以使用异常捕捉;</li>
<li>对于我们觉得可能会发生的事，使用返回码。</li>
</ul>
<h1 id="异步的错误处理"><a href="#异步的错误处理" class="headerlink" title="异步的错误处理"></a>异步的错误处理</h1><p>在异步编程的世界里，因为被调用的函数是被放到了另外一个线程里运行，这将导致: </p>
<ul>
<li>无法使用返回码。因为函数在被异步运行中，所谓的返回只是把处理权交给下一条指令，而不是把函数运行完的结果返回。所以，函数返回的语义完全变了，返回码也没有用了。</li>
<li>无法使用抛异常的方式。因为除了上述的函数立马返回的原因之外，抛出的异常也在另外一 个线程中，不同线程中的栈是完全不一样的，所以主线程的 catch 完全看不到另外一个线程 中的异常。</li>
</ul>
<h2 id="Callback-方式"><a href="#Callback-方式" class="headerlink" title="Callback 方式"></a>Callback 方式</h2><p>通过注册错误处理的回调函数，让异步执行的函数在出错的时候，调用被注册进来的错误处理函数，这样的方式比较好地解决了程序的错误处理。而出错的语义从返回码、异常捕捉到了直接耦合错误出处函数的样子。</p>
<h2 id="Promise-模式"><a href="#Promise-模式" class="headerlink" title="Promise 模式"></a>Promise 模式</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doSomething()</span><br><span class="line">.then(<span class="function"><span class="params">result</span> =&gt;</span> doSomethingElse(result)) </span><br><span class="line">.then(<span class="function"><span class="params">newResult</span> =&gt;</span> doThirdThing(newResult))</span><br><span class="line">.then(<span class="function"><span class="params">finalResult</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`Got the final result: <span class="subst">$&#123;finalResult&#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(failureCallback);</span><br></pre></td></tr></table></figure>
<p>上面代码中的 then() 和 catch() 方法就是 Promise对象的方法，then()方法可以把各个异步的函数给串联起来，而catch() 方法则是出错的处理。</p>
<h3 id="Java-异步编程的-Promise-模式"><a href="#Java-异步编程的-Promise-模式" class="headerlink" title="Java 异步编程的 Promise 模式"></a>Java 异步编程的 Promise 模式</h3><p>链式处理:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">CompletableFuture</span><span class="selector-class">.supplyAsync</span>(<span class="selector-tag">this</span><span class="selector-pseudo">::findReceiver)</span></span><br><span class="line">					<span class="selector-class">.thenApply</span>(<span class="selector-tag">this</span><span class="selector-pseudo">::sendMsg)</span></span><br><span class="line">					<span class="selector-class">.thenAccept</span>(<span class="selector-tag">this</span><span class="selector-pseudo">::notify)</span>;</span><br></pre></td></tr></table></figure></p>
<p>异常处理:<br><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture.supplyAsync(Integer::parseInt)</span><br><span class="line">				 .<span class="function"><span class="title">thenApply</span>(r -&gt;</span> r * <span class="number">2</span> * Math.PI)</span><br><span class="line">				.<span class="function"><span class="title">thenApply</span>(s -&gt;</span> <span class="string">"apply&gt;&gt; "</span> + s)</span><br><span class="line">				.<span class="function"><span class="title">exceptionally</span>(ex -&gt;</span> <span class="string">"Error: "</span> + ex.getMessage());</span><br></pre></td></tr></table></figure></p>
<p>混合处理:<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture.supplyAsync(Integer::parseInt) </span><br><span class="line">				.thenApply(r<span class="function"> -&gt;</span> r * <span class="number">2</span> * Math.PI)</span><br><span class="line">				.thenApply(s<span class="function"> -&gt;</span> <span class="string">"apply&gt;&gt; "</span> + s) </span><br><span class="line">				.handle<span class="function"><span class="params">((result, ex) -&gt; &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">						<span class="keyword">if</span> (result != <span class="literal">null</span>) &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">                         <span class="keyword">return</span> result;</span></span></span><br><span class="line"><span class="function"><span class="params">                     &#125; <span class="keyword">else</span> &#123;                     	</span></span></span><br><span class="line"><span class="function"><span class="params">						<span class="keyword">return</span> <span class="string">"Error handling: "</span> + ex.getMessage();</span></span></span><br><span class="line"><span class="function"><span class="params">					&#125;</span></span></span><br><span class="line"><span class="function"><span class="params">				&#125;)</span>;</span></span><br></pre></td></tr></table></figure></p>
<h1 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h1><ul>
<li>统一分类的错误字典。无论你是使用错误码还是异常捕捉，都需要认真并统一地做好错误的分类。最好是在一个地方定义相关的错误。</li>
<li>定义错误的严重程度。</li>
<li>错误日志的输出最好使用错误码，而不是错误信息。打印错误日志的时候，除了要用统一的格式，最好不要用错误信息，而使用相应的错误码，错误码不一定是数字，也可以是一个能从错误字典里找到的一个唯一的可以让人读懂的关键字。这样，会非常有利于日志分析软件进行自动化监控，而不是要从错误信息中做语义分析。</li>
<li>忽略错误最好有日志</li>
<li>对于同一个地方不停的报错，最好不要都打到日志里，打出一个错误以及出现的次数。</li>
<li>尽可能在错误发生的地方处理错误。</li>
<li>处理错误时，总是要清理已分配的资源。</li>
<li>为你的错误定义提供清楚的文档以及每种错误的代码示例</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-09-24/2020/error_handle/" data-id="ckg7o6w2700021ksluoj0ihzf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2020/state-machine" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-09-23/2020/state-machine/" class="article-date">
  <time datetime="2020-09-23T15:08:00.000Z" itemprop="datePublished">2020-09-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-09-23/2020/state-machine/">State Machine</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="状态机定义"><a href="#状态机定义" class="headerlink" title="状态机定义"></a>状态机定义</h1><p>有限状态机，（英语：Finite-state machine, FSM），又称有限状态自动机，简称状态机，是表示有限个状态以及在这些状态之间的转移和动作等行为的数学模型。</p>
<p>有限状态机体现了两点：首先是离散的，然后是有限的。</p>
<ul>
<li>State：状态这个词有些难以定义，状态存储关于过去的信息，就是说它反映从系统开始到现在时刻的输入变化。</li>
<li>Actions &amp; Transitions：转换指示状态变更，并且用必须满足来确使转移发生的条件来描述它。动作是在给定时刻要进行的活动的描述。</li>
<li>Guards:检测器出现的原因是为了检测是否满足从一个状态切换到另外一个状态的条件。</li>
<li>Event：事件，又见事件，笼统说来，对系统重要的某件事情被称为事件。</li>
</ul>
<h1 id="状态机示例"><a href="#状态机示例" class="headerlink" title="状态机示例"></a>状态机示例</h1><p>现实中的例子：验票闸门<br>用于控制地铁和游乐园游乐设施的旋转门是一个门，在腰高处有三个旋转臂，一个横跨入口通道。最初，手臂被锁定，阻挡了入口，阻止了顾客通过。将硬币或代币存放在旋转门上的槽中可解锁手臂，允许单个客户穿过。在顾客通过之后，再次锁定臂直到插入另一枚硬币。</p>
<p>旋转门被视为状态机，有两种可能的状态：锁定和解锁。有两种可能影响其状态的输入：将硬币放入槽（硬币）并推动手臂（推动）。在锁定状态下，推动手臂无效; 无论输入推送次数多少，它都处于锁定状态。投入硬币 - 即给机器输入硬币 - 将状态从锁定转换为解锁。在解锁状态下，放入额外的硬币无效; 也就是说，给予额外的硬币输入不会改变状态。然而，顾客推动手臂，进行推动输入，将状态转回Locked。</p>
<p><img src="/images/2020/state-machine.png" alt><br>旋转栅状态机也可以由称为状态图的有向图表示 （上面）。每个状态由节点（圆圈）表示。边（箭头）显示从一个状态到另一个状态的转换。每个箭头都标有触发该转换的输入。不引起状态改变的输入（例如处于未锁定状态的硬币输入）由返回到原始状态的圆形箭头表示。从黑点进入Locked节点的箭头表示它是初始状态。</p>
<p>#主流框架</p>
<ul>
<li>Spring Statemachine</li>
<li>Stateless4j</li>
<li>Squirrel-Foundation</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-09-23/2020/state-machine/" data-id="ckg7o6w2g000l1ksl1eho4j4h" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2020/k8s-deamonset" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-09-11/2020/k8s-deamonset/" class="article-date">
  <time datetime="2020-09-11T10:33:00.000Z" itemprop="datePublished">2020-09-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-09-11/2020/k8s-deamonset/">K8s DeamonSet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h1><p>DaemonSet 的主要作用，是让你在 Kubernetes 集群里，运行一个 Daemon Pod。 </p>
<h1 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h1><ol>
<li>这个 Pod 运行在 Kubernetes 集群里的每一个节点(Node)上;</li>
<li>每个节点上只有一个这样的 Pod 实例;</li>
<li>当有新的节点加入 Kubernetes 集群后，该 Pod 会自动地在新节点上被创建出来;而当旧 节点被删除后，它上面的 Pod 也相应地会被回收掉。</li>
</ol>
<h1 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h1><ol>
<li>各种网络插件的 Agent 组件，都必须运行在每一个节点上，用来处理这个节点上的容器网 络;</li>
<li>各种存储插件的 Agent 组件，也必须运行在每一个节点上，用来在这个节点上挂载远程存 储目录，操作容器的 Volume 目录;</li>
<li>各种监控组件和日志组件，也必须运行在每一个节点上，负责这个节点上的监控信息和日志 搜集。</li>
</ol>
<h1 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h1><p>Deployment 部署的副本 Pod 会分布在各个 Node 上，每个 Node 都可能运行好几个副本。DaemonSet 的不同之处在于：每个 Node 上最多只能运行一个副本。</p>
<p><img src="/images/2020/k8s-scale.png" alt></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-09-11/2020/k8s-deamonset/" data-id="ckg7o6w2a00091ksl77wvknsy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2020/k8s-statefulset" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-09-09/2020/k8s-statefulset/" class="article-date">
  <time datetime="2020-09-09T17:03:00.000Z" itemprop="datePublished">2020-09-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-09-09/2020/k8s-statefulset/">K8s StatefulSet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Stateful-Application"><a href="#Stateful-Application" class="headerlink" title="Stateful Application"></a>Stateful Application</h1><p>实例之间有不对等关系，以及实例对外部数据有依赖关系的应用，就被称为“有状态 应用”(Stateful Application)</p>
<h1 id="拓扑状态"><a href="#拓扑状态" class="headerlink" title="拓扑状态"></a>拓扑状态</h1><p>这种情况意味着，应用的多个实例之间不是完全对等的关系。这些应用实例，必 须按照某些顺序启动，比如应用的主节点 A 要先于从节点 B 启动。而如果你把 A 和 B 两个 Pod 删除掉，它们再次被创建出来时也必须严格按照这个顺序才行。并且，新创建出来的 Pod，必须和原来 Pod 的网络标识一样，这样原先的访问者才能使用同样的方法，访问到 这个新 Pod。</p>
<h2 id="StatefulSet实现"><a href="#StatefulSet实现" class="headerlink" title="StatefulSet实现"></a>StatefulSet实现</h2><p>StatefulSet 这个控制器的主要作用之一，就是使用 Pod 模板创建 Pod 的时候， 对它们进行编号，并且按照编号顺序逐一完成创建工作。而当 StatefulSet 的“控 制循环”发现 Pod 的“实际状态”与“期望状态”不一致，需要新建或者删除 Pod 进行“调谐”的时候，它会严格按照这些 Pod 编号的顺序，逐一完成这些操作。通过 Headless Service 的方式，StatefulSet 为每个 Pod 创建了一个固定并且稳定 的 DNS 记录，来作为它的访问入口。</p>
<h2 id="Headless-Service-配置"><a href="#Headless-Service-配置" class="headerlink" title="Headless Service 配置"></a>Headless Service 配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">80</span></span><br><span class="line">  <span class="attr">clusterIP:</span> <span class="string">None</span></span><br></pre></td></tr></table></figure>
<h2 id="StatefulSet-配置"><a href="#StatefulSet-配置" class="headerlink" title="StatefulSet 配置"></a>StatefulSet 配置</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">apiVersion</span>: apps/v1 </span><br><span class="line"><span class="attribute">kind</span>: StatefulSet</span><br><span class="line"><span class="attribute">metadata</span>:</span><br><span class="line">  <span class="attribute">name</span>: web</span><br><span class="line"><span class="attribute">spec</span>:</span><br><span class="line">  <span class="attribute">serviceName</span>: <span class="string">"nginx"</span></span><br><span class="line">  <span class="attribute">replicas</span>: <span class="number">2</span></span><br><span class="line">  <span class="attribute">selector</span>:</span><br><span class="line">    <span class="attribute">matchLabels</span>:</span><br><span class="line">      <span class="attribute">app</span>: nginx</span><br><span class="line">  <span class="attribute">template</span>:</span><br><span class="line">    <span class="attribute">metadata</span>:</span><br><span class="line">      <span class="attribute">labels</span>:</span><br><span class="line">        <span class="attribute">app</span>: nginx</span><br><span class="line">    <span class="attribute">spec</span>:</span><br><span class="line">      <span class="attribute">containers</span>:</span><br><span class="line">        - <span class="attribute">name</span>: nginx</span><br><span class="line">          <span class="attribute">image</span>: <span class="attribute">nginx</span>:<span class="number">1.8</span></span><br><span class="line">          <span class="attribute">ports</span>:</span><br><span class="line">            - <span class="attribute">containerPort</span>: <span class="number">80</span></span><br><span class="line">              <span class="attribute">name</span>: web</span><br></pre></td></tr></table></figure>
<h1 id="存储状态"><a href="#存储状态" class="headerlink" title="存储状态"></a>存储状态</h1><p>这种情况意味着，应用的多个实例分别绑定了不同的存储数据。对于这些应用实 例来说，Pod A 第一次读取到的数据，和隔了十分钟之后再次读取到的数据，应该是同一 份，哪怕在此期间 Pod A 被重新创建过。这种情况最典型的例子，就是一个数据库应用的 多个存储实例。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>Kubernetes 项目引入了一组叫作 Persistent Volume Claim(PVC)和 Persistent Volume(PV)的 API 对象. Kubernetes 中 PVC 和 PV 的设计，实际上类似于“接口”和“实现”的思想。开发者 只要知道并会使用“接口”，即:PVC;而运维人员则负责给“接口”绑定具体的实现，即: PV。而 PVC、PV 的设计，也使得 StatefulSet 对存储状态的管理成为了可能。<br>StatefulSet 为每一个 Pod 分配并创建一个同样编号的 PVC。这样，Kubernetes 就可 以通过 Persistent Volume 机制为这个 PVC 绑定上对应的 PV，从而保证了每一个 Pod 都拥有 一个独立的 Volume。</p>
<h2 id="PVC-配置"><a href="#PVC-配置" class="headerlink" title="PVC 配置"></a>PVC 配置</h2><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">kind:</span> PersistentVolumeClaim</span><br><span class="line"><span class="symbol">apiVersion:</span> v1</span><br><span class="line"><span class="symbol">metadata:</span></span><br><span class="line"><span class="symbol">  name:</span> pv-claim</span><br><span class="line"><span class="symbol">spec:</span></span><br><span class="line"><span class="symbol">  accessModes:</span></span><br><span class="line">    - ReadWriteOnce</span><br><span class="line"><span class="symbol">  resources:</span></span><br><span class="line"><span class="symbol">    requests:</span></span><br><span class="line"><span class="symbol">      storage:</span> <span class="number">1</span>Gi</span><br></pre></td></tr></table></figure>
<h2 id="StatefulSet-配置-1"><a href="#StatefulSet-配置-1" class="headerlink" title="StatefulSet 配置"></a>StatefulSet 配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span> <span class="comment"># for versions before 1.9.0 use apps/v1beta2</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">StatefulSet</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">web</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceName:</span> <span class="string">"nginx"</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">nginx:1.8</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">web</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">www</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">/usr/share/nginx/html</span></span><br><span class="line">  <span class="attr">volumeClaimTemplates:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">metadata:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">www</span></span><br><span class="line">      <span class="attr">spec:</span></span><br><span class="line">        <span class="attr">accessModes:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">ReadWriteOnce</span></span><br><span class="line">        <span class="attr">resources:</span></span><br><span class="line">          <span class="attr">requests:</span></span><br><span class="line">            <span class="attr">storage:</span> <span class="string">1Gi</span></span><br></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>StatefulSet 其实就是一种特殊的 Deployment，而其独特之处在于，它的每个 Pod 都被编号了。而且，这个编号会体现在 Pod 的名字和 hostname 等标识信息上，这不仅代表了 Pod 的创建顺序，也是 Pod 的重要网络标 识(即:在整个集群里唯一的、可被的访问身份)。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-09-09/2020/k8s-statefulset/" data-id="ckg7o6w2c000f1kslqhwqtfy1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2020/hmac" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-09-04/2020/hmac/" class="article-date">
  <time datetime="2020-09-04T17:42:00.000Z" itemprop="datePublished">2020-09-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-09-04/2020/hmac/">HMAC 算法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="HMAC-Hash-based-Message-Authentication-Code-哈希消息认证码"><a href="#HMAC-Hash-based-Message-Authentication-Code-哈希消息认证码" class="headerlink" title="HMAC Hash-based Message Authentication Code, 哈希消息认证码."></a>HMAC Hash-based Message Authentication Code, 哈希消息认证码.</h1><h2 id="HMAC是密钥相关的哈希运算消息认证码，HMAC运算利用哈希算法，以一个密钥和一个消息为输入，生成一个消息摘要作为输出。就是所谓的加盐"><a href="#HMAC是密钥相关的哈希运算消息认证码，HMAC运算利用哈希算法，以一个密钥和一个消息为输入，生成一个消息摘要作为输出。就是所谓的加盐" class="headerlink" title="HMAC是密钥相关的哈希运算消息认证码，HMAC运算利用哈希算法，以一个密钥和一个消息为输入，生成一个消息摘要作为输出。就是所谓的加盐 !"></a>HMAC是密钥相关的哈希运算消息认证码，HMAC运算利用哈希算法，以一个密钥和一个消息为输入，生成一个消息摘要作为输出。就是所谓的加盐 !</h2><h2 id="运算作用"><a href="#运算作用" class="headerlink" title="运算作用"></a>运算作用</h2><ul>
<li>验证TPM接受的授权数据和认证数据；</li>
<li>确认TPM接受到的命令请求是已授权的请求，并且，命令在传送的过程中没有被改动过。<br>定义HMAC需要一个加密用散列函数（表示为H，可以是MD5或者SHA-1）和一个密钥K。我们用B来表示数据块的字节数。（以上所提到的散列函数的分割数据块字长B=64），用L来表示散列函数的输出数据字节数（MD5中L=16,SHA-1中L=20）。鉴别密钥的长度可以是小于等于数据块字长的任何正整数值。应用程序中使用的密钥长度若是比B大，则首先用使用散列函数H作用于它，然后用H输出的L长度字符串作为在HMAC中实际使用的密钥。一般情况下，推荐的最小密钥K长度是L个字节。</li>
</ul>
<h2 id="算法表示"><a href="#算法表示" class="headerlink" title="算法表示"></a>算法表示</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">算法公式 ： HMAC（K，M）=H（K⊕opad∣H（K⊕ipad∣M）） [<span class="number">1</span>]</span><br><span class="line">H 代表所采用的HASH算法(如SHA<span class="number">-256</span>)</span><br><span class="line">K 代表认证密码</span><br><span class="line">Ko 代表HASH算法的密文</span><br><span class="line">M 代表一个消息输入</span><br><span class="line">B 代表H中所处理的块大小，这个大小是处理块大小，而不是输出hash的大小</span><br><span class="line">如，SHA<span class="number">-1</span>和SHA<span class="number">-256</span> B = <span class="number">64</span></span><br><span class="line">SHA<span class="number">-384</span>和SHA<span class="number">-512</span> B = <span class="number">128</span></span><br><span class="line">L 表示hash的大小</span><br><span class="line">Opad 用<span class="number">0x5c</span>重复B次</span><br><span class="line">Ipad 用<span class="number">0x36</span>重复B次</span><br><span class="line">Apad 用<span class="number">0x878FE1F3</span>重复(L/<span class="number">4</span>)次</span><br></pre></td></tr></table></figure>
<h2 id="HMAC的应用"><a href="#HMAC的应用" class="headerlink" title="HMAC的应用"></a>HMAC的应用</h2><p>hmac主要应用在身份验证中，它的使用方法是这样的：</p>
<ul>
<li>(1) 客户端发出登录请求（假设是浏览器的GET请求）</li>
<li>(2) 服务器返回一个随机值，并在会话中记录这个随机值</li>
<li>(3) 客户端将该随机值作为密钥，用户密码进行hmac运算，然后提交给服务器</li>
<li>(4) 服务器读取用户数据库中的用户密码和步骤2中发送的随机值做与客户端一样的hmac运算，然后与用户发送的结果比较，如果结果一致则验证用户合法.</li>
</ul>
<p>在这个过程中，可能遭到安全攻击的是服务器发送的随机值和用户发送的hmac结果，而对于截获了这两个值的黑客而言这两个值是没有意义的，绝无获取用户密码的可能性，随机值的引入使hmac只在当前会话中有效，大大增强了安全性和实用性。大多数的语言都实现了hmac算法，比如php的mhash、python的hmac.py、java的MessageDigest类，在web验证中使用hmac也是可行的，用js进行md5运算的速度也是比较快的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-09-04/2020/hmac/" data-id="ckg7o6w2800051kslmr6i341p" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2020/java-aes-key" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-09-04/2020/java-aes-key/" class="article-date">
  <time datetime="2020-09-04T17:34:00.000Z" itemprop="datePublished">2020-09-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-09-04/2020/java-aes-key/">Java 生成 AES 秘钥</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="AES工作模式"><a href="#AES工作模式" class="headerlink" title="AES工作模式"></a>AES工作模式</h1><h2 id="电子密码本：Electronic-Code-Book-Mode-ECB"><a href="#电子密码本：Electronic-Code-Book-Mode-ECB" class="headerlink" title="电子密码本：Electronic Code Book Mode (ECB)"></a>电子密码本：Electronic Code Book Mode (ECB)</h2><p>ECB模式只是将明文按分组大小切分，然后用同样的密钥正常加密切分好的明文分组。ECB的理想应用场景是短数据（如加密密钥）的加密。此模式的问题是无法隐藏原明文数据的模式，因为同样的明文分组加密得到的密文也是一样的。</p>
<h2 id="密码分组链接：Cipher-Block-Chaining-Mode-CBC"><a href="#密码分组链接：Cipher-Block-Chaining-Mode-CBC" class="headerlink" title="密码分组链接：Cipher Block Chaining Mode (CBC)"></a>密码分组链接：Cipher Block Chaining Mode (CBC)</h2><p>此模式是1976年由IBM所发明，引入了IV（初始化向量：Initialization Vector）的概念。IV是长度为分组大小的一组随机，通常情况下不用保密，不过在大多数情况下，针对同一密钥不应多次使用同一组IV。<br>CBC要求第一个分组的明文在加密运算前先与IV进行异或；从第二组开始，所有的明文先与前一分组加密后的密文进行异或。[区块链(blockchain)的鼻祖！]<br>CBC模式相比ECB实现了更好的模式隐藏，但因为其将密文引入运算，加解密操作无法并行操作。同时引入的IV向量，还需要加、解密双方共同知晓方可。</p>
<h2 id="密文反馈：Cipher-Feedback-Mode-CFB"><a href="#密文反馈：Cipher-Feedback-Mode-CFB" class="headerlink" title="密文反馈：Cipher Feedback Mode (CFB)"></a>密文反馈：Cipher Feedback Mode (CFB)</h2><p>与CBC模式类似，但不同的地方在于，CFB模式先生成密码流字典，然后用密码字典与明文进行异或操作并最终生成密文。后一分组的密码字典的生成需要前一分组的密文参与运算。<br>CFB模式是用分组算法实现流算法，明文数据不需要按分组大小对齐。</p>
<h2 id="输出反馈：Output-Feedback-Mode-OFB"><a href="#输出反馈：Output-Feedback-Mode-OFB" class="headerlink" title="输出反馈：Output Feedback Mode (OFB)"></a>输出反馈：Output Feedback Mode (OFB)</h2><p>OFB模式与CFB模式不同的地方是：生成字典的时候会采用明文参与运算，CFB采用的是密文。<br>CTR模式同样会产生流密码字典，但同是会引入一个计数，以保证任意长时间均不会产生重复输出。</p>
<h2 id="计数器模式：Counter-Mode-CTR"><a href="#计数器模式：Counter-Mode-CTR" class="headerlink" title="计数器模式：Counter Mode (CTR)"></a>计数器模式：Counter Mode (CTR)</h2><h1 id="生成-AES-秘钥"><a href="#生成-AES-秘钥" class="headerlink" title="生成 AES 秘钥"></a>生成 AES 秘钥</h1><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">KeyGenerator kgen = KeyGenerator.getInstance(<span class="string">"AES"</span>);</span><br><span class="line">SecureRandom secureRandom = <span class="keyword">new</span> SecureRandom();</span><br><span class="line">kgen.init(<span class="number">256</span>, secureRandom);</span><br><span class="line">SecretKey <span class="built_in">key</span> = kgen.generateKey();</span><br><span class="line">System.out.<span class="built_in">println</span>(Base64.encodeBase64String(<span class="built_in">key</span>.getEncoded()));</span><br></pre></td></tr></table></figure>
<h1 id="AES-CBC-PKCS5Padding-生成-IV"><a href="#AES-CBC-PKCS5Padding-生成-IV" class="headerlink" title="AES/CBC/PKCS5Padding 生成 IV"></a>AES/CBC/PKCS5Padding 生成 IV</h1><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SecureRandom secureRandom = <span class="keyword">new</span> SecureRandom();</span><br><span class="line">kgen.init(<span class="number">256</span>, secureRandom);</span><br><span class="line"><span class="keyword">byte</span>[] iv = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>];</span><br><span class="line">secureRandom.nextBytes(iv);</span><br><span class="line">System.out.<span class="built_in">println</span>(Base64.encodeBase64String(iv));</span><br></pre></td></tr></table></figure>
<h1 id="AES-CBC-PKCS5Padding-加解密"><a href="#AES-CBC-PKCS5Padding-加解密" class="headerlink" title="AES/CBC/PKCS5Padding 加解密"></a>AES/CBC/PKCS5Padding 加解密</h1><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RijndaelCrypt</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> TAG = <span class="string">"RijndaelCrypt"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> TRANSFORMATION = <span class="string">"AES/CBC/PKCS5Padding"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> ALGORITHM = <span class="string">"AES"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SecretKey _password;</span><br><span class="line">    <span class="keyword">private</span> IvParameterSpec _IVParamSpec;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Cipher cipher;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger <span class="built_in">log</span> = LoggerFactory.getLogger(RijndaelCrypt.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Constructor</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RijndaelCrypt</span><span class="params">(<span class="keyword">byte</span>[] key, <span class="keyword">byte</span>[] iv)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            _password = <span class="keyword">new</span> SecretKeySpec(key, ALGORITHM);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//Initialize objects</span></span><br><span class="line">            cipher = Cipher.getInstance(TRANSFORMATION);</span><br><span class="line"></span><br><span class="line">            _IVParamSpec = <span class="keyword">new</span> IvParameterSpec(iv);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            <span class="built_in">log</span>.error(TAG, <span class="string">"No such algorithm "</span> + ALGORITHM, e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchPaddingException e) &#123;</span><br><span class="line">            <span class="built_in">log</span>.error(TAG, <span class="string">"No such padding PKCS7"</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">decrypt</span><span class="params">(<span class="keyword">byte</span>[] cipherText)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            cipher.init(Cipher.DECRYPT_MODE, _password, _IVParamSpec);</span><br><span class="line">            <span class="keyword">byte</span>[] decryptedVal = cipher.doFinal(cipherText);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">String</span>(decryptedVal);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalBlockSizeException e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (BadPaddingException e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidAlgorithmParameterException e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidKeyException e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Encryptor.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return Base64 encrypted text</span></span><br><span class="line"><span class="comment">     * @text String to be encrypted</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">encrypt</span><span class="params">(<span class="keyword">byte</span>[] <span class="built_in">text</span>)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            cipher.init(Cipher.ENCRYPT_MODE, _password, _IVParamSpec);</span><br><span class="line">            <span class="keyword">byte</span>[] encryptedData = cipher.doFinal(<span class="built_in">text</span>);</span><br><span class="line">            <span class="keyword">return</span> Base64.encodeBase64String(encryptedData);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="built_in">log</span>.error(e.getMessage(), e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> null;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">encrypt</span><span class="params">(<span class="keyword">String</span> <span class="built_in">text</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] data = StringUtils.getBytesUtf8(<span class="built_in">text</span>);</span><br><span class="line">        <span class="keyword">return</span> encrypt(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-09-04/2020/java-aes-key/" data-id="ckg7o6w2900071ksl8o7ltr9y" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2020/k8s-scale" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-09-04/2020/k8s-scale/" class="article-date">
  <time datetime="2020-09-04T17:02:00.000Z" itemprop="datePublished">2020-09-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-09-04/2020/k8s-scale/">K8s 水平扩展</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Deployment-关系"><a href="#Deployment-关系" class="headerlink" title="Deployment 关系"></a>Deployment 关系</h1><p>Deployment 通过“控制器模式”，来操作 ReplicaSet 的个数和属性，进 而实现“水平扩展 / 收缩”和“滚动更新”这两个编排动作。<br><img src="/images/2020/k8s-scale.png" alt></p>
<h1 id="增加节点"><a href="#增加节点" class="headerlink" title="增加节点"></a>增加节点</h1><p><code>kubectl scale deployment nginx-deployment --replicas=4</code></p>
<h1 id="查看扩展状态"><a href="#查看扩展状态" class="headerlink" title="查看扩展状态"></a>查看扩展状态</h1><p><code>kubectl rollout status deployment/nginx-deployment</code></p>
<h1 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h1><p><code>kubectl edit deployment/nginx-deployment</code></p>
<h1 id="回滚"><a href="#回滚" class="headerlink" title="回滚"></a>回滚</h1><p><code>kubectl rollout undo deployment/nginx-deployment</code></p>
<h1 id="变更历史"><a href="#变更历史" class="headerlink" title="变更历史"></a>变更历史</h1><p><code>kubectl apply -f nginx-deployment2.yaml --record
kubectl rollout history deployment/nginx-deployment</code></p>
<h1 id="查看版本变更"><a href="#查看版本变更" class="headerlink" title="查看版本变更"></a>查看版本变更</h1><p><code>kubectl rollout history deployment/nginx-deployment --revision=2</code></p>
<h1 id="回滚指定版本"><a href="#回滚指定版本" class="headerlink" title="回滚指定版本"></a>回滚指定版本</h1><p><code>kubectl rollout undo deployment/nginx-deployment --to-revision=2</code></p>
<h1 id="暂停滚动更新"><a href="#暂停滚动更新" class="headerlink" title="暂停滚动更新"></a>暂停滚动更新</h1><p><code>kubectl rollout pause deployment/nginx-deployment</code></p>
<h1 id="恢复滚动更新"><a href="#恢复滚动更新" class="headerlink" title="恢复滚动更新"></a>恢复滚动更新</h1><p><code>kubectl rollout resume deployment/nginx-deployment</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-09-04/2020/k8s-scale/" data-id="ckg7o6w2c000d1kslg7uapcil" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2020/spring-amqp-ack" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020-09-03/2020/spring-amqp-ack/" class="article-date">
  <time datetime="2020-09-03T15:07:00.000Z" itemprop="datePublished">2020-09-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020-09-03/2020/spring-amqp-ack/">Spring Amqp Ack</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Ack-模式说明"><a href="#Ack-模式说明" class="headerlink" title="Ack 模式说明"></a>Ack 模式说明</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * No acks - &#123;<span class="doctag">@code</span> autoAck=true&#125; in &#123;<span class="doctag">@code</span> Channel.basicConsume()&#125;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">NONE,</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Manual acks - user must ack/nack via a channel aware listener.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MANUAL,</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Auto - the container will issue the ack/nack based on whether</span></span><br><span class="line"><span class="comment"> * the listener returns normally, or throws an exception.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;&lt;em&gt;Do not confuse with RabbitMQ &#123;<span class="doctag">@code</span> autoAck&#125; which is</span></span><br><span class="line"><span class="comment"> * represented by &#123;<span class="doctag">@link</span> #NONE&#125; here&lt;/em&gt;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">AUTO;</span><br></pre></td></tr></table></figure>
<h1 id="代码逻辑"><a href="#代码逻辑" class="headerlink" title="代码逻辑"></a>代码逻辑</h1><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.amqp.rabbit.listener.BlockingQueueConsumer#commitIfNecessary</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> boolean commitIfNecessary(boolean localTx) throws IOException &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.deliveryTags.isEmpty()) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * If we have a TX Manager, but no TX, act like we are locally transacted.</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		boolean isLocallyTransacted = localTx</span><br><span class="line">				|| (<span class="keyword">this</span>.transactional</span><br><span class="line">				&amp;&amp; TransactionSynchronizationManager.getResource(<span class="keyword">this</span>.connectionFactory) == <span class="literal">null</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">			boolean ackRequired = !<span class="keyword">this</span>.acknowledgeMode.isAutoAck() &amp;&amp; !<span class="keyword">this</span>.acknowledgeMode.isManual();</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (ackRequired &amp;&amp; (!<span class="keyword">this</span>.transactional || isLocallyTransacted)) &#123;</span><br><span class="line">				long deliveryTag = new ArrayList&lt;<span class="built_in">Long</span>&gt;(<span class="keyword">this</span>.deliveryTags).<span class="keyword">get</span>(<span class="keyword">this</span>.deliveryTags.size() - <span class="number">1</span>);</span><br><span class="line">				<span class="keyword">this</span>.channel.basicAck(deliveryTag, <span class="literal">true</span>);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (isLocallyTransacted) &#123;</span><br><span class="line">				<span class="comment">// For manual acks we still need to commit</span></span><br><span class="line">				RabbitUtils.commitIfNecessary(<span class="keyword">this</span>.channel);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">this</span>.deliveryTags.clear();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://bcllemon.github.io/2020-09-03/2020/spring-amqp-ack/" data-id="ckg7o6w2f000j1kslmrn4j9zg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/其他/">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂记/">杂记</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020-10-13/2020/cors/">跨域资源共享 CORS</a>
          </li>
        
          <li>
            <a href="/2020-09-29/2020/api_trace/">API 调用追踪</a>
          </li>
        
          <li>
            <a href="/2020-09-24/2020/error_handle/">异常处理</a>
          </li>
        
          <li>
            <a href="/2020-09-23/2020/state-machine/">State Machine</a>
          </li>
        
          <li>
            <a href="/2020-09-11/2020/k8s-deamonset/">K8s DeamonSet</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Bowen<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>